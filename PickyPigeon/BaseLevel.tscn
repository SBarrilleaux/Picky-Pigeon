[gd_scene load_steps=20 format=4 uid="uid://dcc5gll3m8e6n"]

[ext_resource type="Gradient" uid="uid://bsqdnytxyj05o" path="res://BackgroundAndUI/gradient_placeholder.tres" id="1_e5w5x"]
[ext_resource type="StyleBox" uid="uid://odlv7kym1cy4" path="res://BackgroundAndUI/backgroundPanels.tres" id="2_f6vu8"]
[ext_resource type="Theme" uid="uid://de2n0oa8q8kvm" path="res://BackgroundAndUI/FontTheme.tres" id="3_moi6l"]
[ext_resource type="FontFile" uid="uid://c6lb8h4ou5gfa" path="res://BackgroundAndUI/Rubik_Doodle_Shadow_Font/RubikDoodleShadow-Regular.ttf" id="4_icov6"]
[ext_resource type="PackedScene" uid="uid://brho8cm01rtcm" path="res://items/rowClearMenuItem.tscn" id="5_6h1wh"]
[ext_resource type="Script" uid="uid://c7yn3ws1vic0f" path="res://scripts/backgroundTileManager.gd" id="5_fpy1w"]
[ext_resource type="TileSet" uid="uid://dsg25f2us8oo6" path="res://BackgroundAndUI/baseTiles.tres" id="6_6h1wh"]
[ext_resource type="PackedScene" uid="uid://bspviwtq0o2n5" path="res://items/singleClearMenuItem.tscn" id="7_ek7h3"]
[ext_resource type="Script" uid="uid://du5rertq388rh" path="res://scripts/board_manager.gd" id="7_v8iff"]
[ext_resource type="PackedScene" uid="uid://baymklqleycpa" path="res://items/typeClearMenuItem.tscn" id="8_4v555"]
[ext_resource type="AudioStream" uid="uid://lfx6yt7mo4bg" path="res://sounds/soundEffectSwoosh.mp3" id="8_ek7h3"]
[ext_resource type="AudioStream" uid="uid://wrw0c818p312" path="res://sounds/soundEffectsPop.mp3" id="9_4v555"]
[ext_resource type="PackedScene" uid="uid://dk25g6wltb3wt" path="res://items/columnClearMenuItem.tscn" id="9_6h1wh"]
[ext_resource type="AudioStream" uid="uid://dmmbmva2nuyxj" path="res://sounds/backgroundMusic.mp3" id="10_n2yux"]
[ext_resource type="Script" uid="uid://qcwyh4jkjsk1" path="res://scripts/player_data.gd" id="11_qllts"]
[ext_resource type="PackedScene" uid="uid://c12jrn0err337" path="res://otherScenes/game_over.tscn" id="12_dpxor"]
[ext_resource type="SpriteFrames" uid="uid://jigbls5352ls" path="res://pickyPigeon/pickyPigeonAnimations.tres" id="13_x7biu"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_2ti2u"]
gradient = ExtResource("1_e5w5x")
width = 1920
height = 1080
fill_from = Vector2(0.5, 0)
fill_to = Vector2(0.5, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_2ti2u"]
bg_color = Color(0.225, 0, 0.45, 0.788235)

[node name="Node3D" type="Node3D"]

[node name="Board" type="Node2D" parent="."]

[node name="Background" type="TextureRect" parent="Board"]
z_index = -13
offset_right = 1928.0
offset_bottom = 1102.0
texture = SubResource("GradientTexture2D_2ti2u")

[node name="SideBackground" type="ColorRect" parent="Board/Background"]
visible = false
z_index = -20
layout_mode = 0
offset_right = 1927.0
offset_bottom = 1100.0
color = Color(0.6885, 0, 0.81, 0.180392)

[node name="SideBackground2" type="ColorRect" parent="Board/Background"]
visible = false
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -1931.0
offset_top = -25.0
offset_right = 2.0
offset_bottom = 561.0
grow_horizontal = 0
color = Color(0.1944, 0.40986, 0.81, 0.180392)

[node name="ColorRect" type="ColorRect" parent="Board/Background"]
visible = false
z_index = 10
layout_mode = 0
offset_top = 657.0
offset_right = 40.0
offset_bottom = 672.0
scale = Vector2(8.04, 26)
color = Color(0.631606, 0.708469, 0.938088, 0.643137)

[node name="TurnTextPanel" type="Panel" parent="Board/Background"]
z_index = 1
layout_mode = 1
offset_left = 2.0
offset_top = 20.0
offset_right = 321.0
offset_bottom = 279.0
theme_override_styles/panel = ExtResource("2_f6vu8")

[node name="TurnTextLabel" type="Label" parent="Board/Background/TurnTextPanel"]
unique_name_in_owner = true
z_index = 1
layout_mode = 1
offset_left = -45.0
offset_top = 8.6
offset_right = 376.0
offset_bottom = 194.6
theme = ExtResource("3_moi6l")
theme_override_colors/font_shadow_color = Color(0.16256, 0.606715, 1, 1)
theme_override_fonts/font = ExtResource("4_icov6")
theme_override_font_sizes/font_size = 50
text = "Turns
Remaining
__"
horizontal_alignment = 1

[node name="Objectives" type="Panel" parent="Board/Background"]
z_index = 1
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -329.0
offset_top = 20.0
offset_right = -2.0
offset_bottom = 1042.0
grow_horizontal = 0
theme_override_styles/panel = ExtResource("2_f6vu8")

[node name="ItemsText2" type="Label" parent="Board/Background/Objectives"]
unique_name_in_owner = true
z_index = 1
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -328.0
offset_bottom = 186.0
grow_horizontal = 0
theme = ExtResource("3_moi6l")
theme_override_colors/font_shadow_color = Color(0.16256, 0.606715, 1, 1)
theme_override_fonts/font = ExtResource("4_icov6")
theme_override_font_sizes/font_size = 50
text = "Objectives"
horizontal_alignment = 1

[node name="ItemsText" type="Label" parent="Board/Background"]
unique_name_in_owner = true
z_index = 1
layout_mode = 0
offset_left = -43.0
offset_top = 278.6
offset_right = 378.0
offset_bottom = 464.6
theme = ExtResource("3_moi6l")
theme_override_colors/font_shadow_color = Color(0.16256, 0.606715, 1, 1)
theme_override_fonts/font = ExtResource("4_icov6")
theme_override_font_sizes/font_size = 50
text = "Items"
horizontal_alignment = 1

[node name="ItemsPanel" type="Panel" parent="Board/Background"]
z_index = 1
layout_mode = 1
offset_left = 2.0
offset_top = 274.0
offset_right = 321.0
offset_bottom = 661.0
theme_override_styles/panel = ExtResource("2_f6vu8")

[node name="rowClear" parent="Board/Background/ItemsPanel" node_paths=PackedStringArray("gameManager") instance=ExtResource("5_6h1wh")]
offset_left = 76.0
offset_top = 293.0
offset_right = 76.0
offset_bottom = 293.0
scale = Vector2(0.9, 0.890875)
gameManager = NodePath("../../../Grid")

[node name="columnClear" parent="Board/Background/ItemsPanel" node_paths=PackedStringArray("gameManager") instance=ExtResource("9_6h1wh")]
offset_left = 240.0
offset_top = 294.0
offset_right = 240.0
offset_bottom = 294.0
scale = Vector2(0.9, 0.9)
gameManager = NodePath("../../../Grid")

[node name="singleClear" parent="Board/Background/ItemsPanel" node_paths=PackedStringArray("gameManager") instance=ExtResource("7_ek7h3")]
offset_left = 76.0
offset_top = 149.0
offset_right = 76.0
offset_bottom = 149.0
scale = Vector2(0.9, 0.9)
gameManager = NodePath("../../../Grid")

[node name="typeClear" parent="Board/Background/ItemsPanel" node_paths=PackedStringArray("gameManager") instance=ExtResource("8_4v555")]
offset_left = 238.0
offset_top = 149.0
offset_right = 238.0
offset_bottom = 149.0
scale = Vector2(0.9, 0.9)
gameManager = NodePath("../../../Grid")

[node name="TopBar" type="Panel" parent="Board/Background"]
layout_mode = 0
offset_right = 1936.0
offset_bottom = 20.0
theme_override_styles/panel = SubResource("StyleBoxFlat_2ti2u")

[node name="BottomBar" type="Panel" parent="Board/Background"]
layout_mode = 0
offset_top = 1042.0
offset_right = 1936.0
offset_bottom = 1100.0
theme_override_styles/panel = SubResource("StyleBoxFlat_2ti2u")

[node name="ObjectivesList" type="ItemList" parent="Board/Background"]
unique_name_in_owner = true
z_index = 30
layout_mode = 1
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -316.0
offset_top = -423.0
offset_right = -16.0
offset_bottom = 452.0
grow_horizontal = 0
grow_vertical = 2
theme = ExtResource("3_moi6l")
allow_search = false
icon_scale = 0.1

[node name="TileMaps" type="Node2D" parent="Board" node_paths=PackedStringArray("boardGrid")]
position = Vector2(320, 20)
scale = Vector2(0.5, 0.5)
script = ExtResource("5_fpy1w")
boardGrid = NodePath("../Grid")

[node name="BoardTiles" type="TileMapLayer" parent="Board/TileMaps"]
scale = Vector2(1, -1)
tile_map_data = PackedByteArray("AAAAAAcAAAAAAAAAAAAJAAcAAAAAAAAAAAADAAcAAAACAAAAAAAEAAcAAAACAAEAAAAAAP//AAAAAAEAAAABAP//AAAAAAEAAAACAP//AAAAAAEAAAADAP//AAAAAAEAAAAEAP//AAAAAAEAAAAFAP//AAAAAAEAAAAGAP//AAAAAAEAAAAHAP//AAAAAAEAAAAIAP//AAAAAAEAAAAJAP//AAAAAAEAAAAJAP7/AAAAAAEAAAAIAP7/AAAAAAEAAAAHAP7/AAAAAAEAAAAGAP7/AAAAAAEAAAAFAP7/AAAAAAEAAAAEAP7/AAAAAAEAAAADAP7/AAAAAAEAAAACAP7/AAAAAAEAAAABAP7/AAAAAAEAAAAAAP7/AAAAAAEAAAAAAP3/AAAAAAEAAAAAAPz/AAAAAAEAAAAAAPv/AAAAAAEAAAAAAPr/AAAAAAEAAAAAAPn/AAAAAAEAAAAAAPj/AAAAAAEAAAABAPj/AAAAAAEAAAACAPj/AAAAAAEAAAADAPj/AAAAAAEAAAAEAPj/AAAAAAEAAAAFAPj/AAAAAAEAAAAGAPj/AAAAAAEAAAAHAPj/AAAAAAEAAAAIAPj/AAAAAAEAAAAJAPj/AAAAAAEAAAAJAPn/AAAAAAEAAAAJAPr/AAAAAAEAAAAIAPr/AAAAAAEAAAAIAPv/AAAAAAEAAAAIAPz/AAAAAAEAAAAIAP3/AAAAAAEAAAAJAP3/AAAAAAEAAAAJAPz/AAAAAAEAAAAIAPn/AAAAAAEAAAAHAPn/AAAAAAEAAAAJAPv/AAAAAAEAAAAHAPv/AAAAAAEAAAAHAPz/AAAAAAEAAAAGAPz/AAAAAAEAAAAGAP3/AAAAAAEAAAAFAP3/AAAAAAEAAAADAP3/AAAAAAEAAAACAP3/AAAAAAEAAAABAP3/AAAAAAEAAAABAPz/AAAAAAEAAAABAPv/AAAAAAEAAAABAPr/AAAAAAEAAAABAPn/AAAAAAEAAAACAPn/AAAAAAEAAAADAPn/AAAAAAEAAAAEAPn/AAAAAAEAAAAFAPn/AAAAAAEAAAAGAPr/AAAAAAEAAAAHAPr/AAAAAAEAAAAHAP3/AAAAAAEAAAAFAPz/AAAAAAEAAAAFAPv/AAAAAAEAAAAFAPr/AAAAAAEAAAAEAP3/AAAAAAEAAAACAPz/AAAAAAEAAAACAPv/AAAAAAEAAAADAPv/AAAAAAEAAAAEAPv/AAAAAAEAAAAEAPz/AAAAAAEAAAADAPz/AAAAAAEAAAACAPr/AAAAAAEAAAADAPr/AAAAAAEAAAAEAPr/AAAAAAEAAAAGAPn/AAAAAAEAAAAGAPv/AAAAAAEAAAA=")
tile_set = ExtResource("6_6h1wh")

[node name="OtherBackgroundTiles" type="TileMapLayer" parent="Board/TileMaps"]
modulate = Color(0.681338, 0.804405, 1, 0.560784)
z_index = -13
z_as_relative = false
tile_map_data = PackedByteArray("AAD+/wEAAAAAAAEAAAD+/wAAAAAAAAEAAAD//wAAAAAAAAEAAAD//wEAAAAAAAEAAAD//wIAAAAAAAEAAAD+/wIAAAAAAAEAAAD9/wAAAAAAAAEAAAD9/wEAAAAAAAEAAAD9/wIAAAAAAAEAAAD//wMAAAAAAAEAAAD+/wMAAAAAAAEAAAD9/wMAAAAAAAEAAAD9/wQAAAAAAAEAAAD+/wQAAAAAAAEAAAD//wQAAAAAAAAAAAD//wUAAAAAAAEAAAD+/wUAAAAAAAEAAAD9/wUAAAAAAAEAAAD9/wYAAAAAAAEAAAD+/wYAAAAAAAEAAAD//wYAAAAAAAEAAAD//wcAAAAAAAEAAAD+/wcAAAAAAAEAAAD9/wcAAAAAAAEAAAD9/wgAAAAAAAEAAAD+/wgAAAAAAAEAAAD//wgAAAAAAAEAAAAAAAgAAAAAAAEAAAABAAgAAAAAAAEAAAACAAgAAAAAAAAAAAADAAgAAAAAAAAAAAAEAAgAAAAAAAAAAAAFAAgAAAAAAAAAAAAGAAgAAAAAAAAAAAAHAAgAAAAAAAEAAAAIAAgAAAAAAAEAAAAJAAgAAAAAAAEAAAAKAAgAAAAAAAEAAAALAAgAAAAAAAEAAAAMAAgAAAAAAAEAAAAMAAQAAAAAAAEAAAAMAAMAAAAAAAEAAAALAAMAAAAAAAEAAAAKAAMAAAAAAAEAAAAKAAIAAAAAAAEAAAALAAIAAAAAAAEAAAAMAAIAAAAAAAEAAAAMAAEAAAAAAAEAAAALAAEAAAAAAAEAAAAKAAEAAAAAAAEAAAAKAAAAAAAAAAEAAAALAAAAAAAAAAEAAAAMAAAAAAAAAAEAAAAMAP//AAAAAAEAAAALAP//AAAAAAEAAAAKAP//AAAAAAEAAAAIAP//AAAAAAEAAAAHAP//AAAAAAEAAAAGAP//AAAAAAEAAAAFAP//AAAAAAEAAAAEAP//AAAAAAEAAAADAP//AAAAAAEAAAACAP//AAAAAAEAAAABAP//AAAAAAEAAAD/////AAAAAAEAAAD+////AAAAAAEAAAD9////AAAAAAEAAAD9//7/AAABAAAAAAD+//7/AAABAAAAAAD///7/AAABAAAAAAAAAP7/AAABAAAAAAABAP7/AAABAAAAAAACAP7/AAABAAAAAAADAP7/AAABAAAAAAAEAP7/AAABAAAAAAAFAP7/AAABAAAAAAAGAP7/AAABAAAAAAAHAP7/AAABAAAAAAAIAP7/AAABAAAAAAAJAP7/AAABAAAAAAAKAP7/AAABAAAAAAALAP7/AAABAAAAAAAMAP7/AAABAAAAAAAKAAYAAAAAAAAAAAALAAYAAAAAAAAAAAALAAcAAAAAAAEAAAAMAAcAAAAAAAEAAAAMAAYAAAAAAAAAAAAMAAUAAAAAAAEAAAALAAUAAAAAAAEAAAALAAQAAAAAAAEAAAAKAAQAAAAAAAEAAAAKAAUAAAAAAAEAAAAKAAcAAAAAAAEAAAAJAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAADAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAAAAAAAAAABAAcAAAAAAAAAAAAGAAcAAAAAAAAAAAAHAAcAAAAAAAAAAAAIAAcAAAAAAAAAAAAJAAcAAAAAAAAAAAAFAAcAAAAAAAAAAAAEAAcAAAAAAAAAAAADAAcAAAAAAAAAAAACAAcAAAAAAAAAAAACAAYAAAAAAAAAAAADAAYAAAAAAAAAAAAEAAYAAAAAAAAAAAAFAAYAAAAAAAAAAAAGAAYAAAAAAAAAAAAIAAYAAAAAAAAAAAAIAAUAAAAAAAAAAAAHAAUAAAAAAAAAAAAGAAUAAAAAAAAAAAAFAAUAAAAAAAAAAAAEAAUAAAAAAAAAAAABAAYAAAAAAAAAAAAHAAYAAAAAAAAAAAAJAAYAAAAAAAAAAAAJAAUAAAAAAAAAAAAGAAQAAAAAAAAAAAAFAAQAAAAAAAAAAAAEAAQAAAAAAAAAAAADAAQAAAAAAAAAAAACAAQAAAAAAAAAAAABAAQAAAAAAAAAAAABAAUAAAAAAAAAAAACAAUAAAAAAAAAAAADAAUAAAAAAAAAAAAJAAQAAAAAAAAAAAAIAAQAAAAAAAAAAAAIAAMAAAAAAAAAAAAHAAMAAAAAAAAAAAAGAAMAAAAAAAAAAAAFAAMAAAAAAAAAAAAEAAIAAAAAAAAAAAADAAIAAAAAAAAAAAACAAIAAAAAAAAAAAABAAIAAAAAAAAAAAABAAMAAAAAAAAAAAACAAMAAAAAAAAAAAADAAMAAAAAAAAAAAAEAAMAAAAAAAAAAAAJAAMAAAAAAAAAAAAIAAIAAAAAAAAAAAAHAAIAAAAAAAAAAAAGAAIAAAAAAAAAAAAFAAIAAAAAAAAAAAAHAAQAAAAAAAAAAAAHAAEAAAAAAAAAAAAGAAEAAAAAAAAAAAAFAAEAAAAAAAAAAAAEAAEAAAAAAAAAAAADAAEAAAAAAAAAAAAJAAIAAAAAAAAAAAAJAAEAAAAAAAAAAAAIAAEAAAAAAAAAAAACAAEAAAAAAAAAAAABAAEAAAAAAAAAAAAJAP//AAAAAAEAAAD8////AAAAAAEAAAAAAP//AAAAAAEAAAA=")
tile_set = ExtResource("6_6h1wh")

[node name="Grid" type="Node2D" parent="Board" groups=["boardController"]]
position = Vector2(-1, 0)
script = ExtResource("7_v8iff")
width = 10
height = 8
xStart = 385
yStart = 980
offset = 128
emptySpaces = PackedVector2Array(5, 3, 5, 4, 4, 4, 4, 3, 6, 5, 3, 5, 6, 2, 3, 2)
objectiveItems = Array[String](["sunflower", "popcorn", "blueberry"])
objectiveGoalTotal = Array[int]([20, 30, 10])
turnMax = 15

[node name="DestroyTimer" type="Timer" parent="Board/Grid"]
wait_time = 0.2
one_shot = true

[node name="CollapseTimer" type="Timer" parent="Board/Grid"]
wait_time = 0.1
one_shot = true

[node name="RefillTimer" type="Timer" parent="Board/Grid"]
wait_time = 0.4
one_shot = true

[node name="Sounds" type="Node2D" parent="Board/Grid"]

[node name="MoveSound" type="AudioStreamPlayer2D" parent="Board/Grid/Sounds"]
stream = ExtResource("8_ek7h3")
volume_db = 1.19

[node name="DestroySound" type="AudioStreamPlayer2D" parent="Board/Grid/Sounds"]
stream = ExtResource("9_4v555")
volume_db = -8.336

[node name="BackgroundMusic" type="AudioStreamPlayer2D" parent="Board/Grid/Sounds"]
stream = ExtResource("10_n2yux")
autoplay = true

[node name="PlayerData" type="Node" parent="Board/Grid"]
script = ExtResource("11_qllts")

[node name="GameOver" parent="Board" instance=ExtResource("12_dpxor")]
visible = false
z_index = 180
offset_right = 1920.0
offset_bottom = 1080.0

[node name="PickyPigeon" type="AnimatedSprite2D" parent="Board"]
unique_name_in_owner = true
position = Vector2(156, 889)
scale = Vector2(0.266898, 0.266898)
sprite_frames = ExtResource("13_x7biu")
animation = &"PigeonIdle"

[connection signal="clearScore" from="Board/Grid" to="Board/Grid/PlayerData" method="_on_grid_clear_score"]
[connection signal="clearScore" from="Board/Grid" to="Board/GameOver" method="_on_grid_clear_score"]
[connection signal="validTiles" from="Board/Grid" to="Board/TileMaps" method="_on_grid_valid_tiles"]
[connection signal="timeout" from="Board/Grid/DestroyTimer" to="Board/Grid" method="_on_destroy_time_timeout"]
[connection signal="timeout" from="Board/Grid/CollapseTimer" to="Board/Grid" method="_on_collapse_timer_timeout"]
[connection signal="timeout" from="Board/Grid/RefillTimer" to="Board/Grid" method="_on_refill_timer_timeout"]
